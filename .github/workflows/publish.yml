name: publish

on:
    push:
        tags:
            - "v*.*.*"
            - "v*.*.*-*"

jobs:
    ubuntu-latest:
        name: ubuntu-latest
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
              with:
                  fetch-depth: 0
            - name: ğŸ› ï¸ Setup .NET 10 SDK
              uses: actions/setup-dotnet@v4
              with:
                  # â¬‡ï¸ æ›´æ”¹è¿™ä¸€è¡Œä»¥æŒ‡å®š .NET 10
                  # '10.0.x' ä¼šå®‰è£… .NET 10 çš„æœ€æ–°ç‰ˆæœ¬
                  dotnet-version: "10.0.x"
            - name: ğŸ› ï¸ Install GitVersion
              run: dotnet tool install --global GitVersion.Tool
            - name: "Run: Push"
              run: sh ./build.sh -t Push 
              env:
                  NUGET_API_KEY: ${{ secrets.NUGET_API_KEY }}
            - name: "Publish: package"
              uses: actions/upload-artifact@v4
              with:
                  name: package
                  path: package